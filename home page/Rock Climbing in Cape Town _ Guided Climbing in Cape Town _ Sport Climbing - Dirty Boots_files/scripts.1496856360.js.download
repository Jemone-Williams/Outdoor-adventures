function ShareHandler(e){var t={url:e.data("url"),text:e.data("text")},a=function(e){var t={};return $.each(e,function(e,a){a&&(t[e]=a)}),$.param(t)},n=function(e,t){var a=Math.round((screen.height-t.height)/2),n=Math.round((screen.width-t.width)/2);e.location=t.url,e.focus(),e.resizeTo(t.width,t.height),e.moveTo(n,a)},i={envelope:function(e){return{url:"mailto:?subject="+e.text+"&body="+e.url}},"google-plus":function(e){return{url:"https://plus.google.com/share?"+a({hl:e.lang,url:e.url})}},facebook:function(e){return{url:"http://www.facebook.com/sharer/sharer.php?"+a({u:e.url,t:e.text}),width:900,height:500}},twitter:function(e){return{url:"https://twitter.com/intent/tweet?"+a({text:e.text,url:e.url,via:e.via}),width:650,height:360}},linkedin:function(e){return{url:"https://www.linkedin.com/cws/share?url="+a({url:e.url,isFramed:"true"}),width:550,height:550}},pinterest:function(e){return{url:"http://pinterest.com/pin/create/button/?url="+a({url:e.url,description:e.text,media:e.image}),width:700,height:300}}},o=this;this.createButton=function(t){var a=$('<a class="share-btn"><i class="fa fa-'+t+'-square fa-lg" ></i></a>');return a.css({cursor:"pointer"}),a.on("click",function(e){e.preventDefault(),o.share(t)}),e.append(a),a},this.appendTwitter=function(){e.append(o.createButton("twitter"))};var r=function(e,a,o,r){var s=$.extend({},t);s.platform=a,s.text||(s.text=r.find("meta").filter('[property="article-title"]').attr("content")),s.via||(s.via=r.find("#twitterHandle").attr("content")),s.lang||(s.lang=r.find("html").attr("lang")),s.image||(s.image=r.find("meta").filter('[property="og:image"]').attr("content"));var l=s.text;if("twitter"==a){var c=26;if(s.via&&(c+=(" via @"+s.via).length),l.length+c>140){var d=l.length+c-140;l=l.substr(0,l.length-d)+"â€¦"}}var p=i[a]({url:o,text:l,via:s.via});n(e,p)};this.share=function(e){var a=t.url?t.url:window.location.href,n="envelope"!==e?window.open("","share"+e,"toolbar=0, status=0, width=50, height=50, top=0, left=0"):window;if(window.location.href!==a){var i=$('<div id="shareLoader"></div>'),o=$('<div style="position: fixed; left: 0; top: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.5);"></div>'),s=$('<i class="fa fa-cog fa-spin" style="color: #fff"></i>');s.css({position:"fixed",top:"50%",left:"50%"}),o.append(s),i.append(o),$("body").append(i),$.ajax(a,{async:!0,success:function(t){i.remove(),r(n,e,a,$("<root/>").append(t))},error:function(){i.remove(),void 0}})}else r(n,e,a,$(document))},this.appendFacebook=function(){e.append(o.createButton("facebook"))},this.appendGoogle=function(){e.append(o.createButton("google-plus"))},this.appendMail=function(){e.append(o.createButton("envelope"))},this.appendLinkedIn=function(){e.append(o.createButton("linkin"))},this.appendPinterest=function(){e.append(o.createButton("pinterest"))}}function PageTimer(){var e=this;this.getLoadTime=function(){var e=(new Date).getTime();window.performance=window.performance||window.mozPerformance||window.msPerformance||window.webkitPerformance||{};var t=performance.timing||{},a=e-t.navigationStart;return Math.round(a/10)/100},this.logToConsole=function(){$(window).on("load",function(){console&&console.info&&void 0})},this.append=function(t){$(window).on("load",function(){t.text(" | LT: "+e.getLoadTime()+"s")})}}function StickyFooter(e,t){var a=$(window);this.updateWrapperCSS=function(){var a=t.outerHeight();e.css({marginBottom:-1*a,paddingBottom:a})},this.bindOnResize=function(){return a.on("resize",this.updateWrapperCSS),this},this.update=function(){return this.updateWrapperCSS(),this}}function ExternalLinkHandler(){var e=this,t=document.location.hostname;this.matchInternalLink=[new RegExp("^https?://(.*?)"+t)],this.addTargetAttribute=function(t){t.find("a").filter('[href^="http://"], [href^="https://"]').each(function(){for(var t=$(this),a=t.attr("href"),n=!1,i=0;i<e.matchInternalLink.length;i++){var o=e.matchInternalLink[i];a.match(o)&&(n=!0)}n||t.attr("target","_blank").addClass("external-link")})}}function UIBindings(){this.bindTooltips=function(){$('[data-toggle="tooltip"]').tooltip()},this.bindPopovers=function(){$('[data-toggle="popover"]').popover()},this.bindSlickCarousels=function(){$("[data-slick-carousel-default]").slick({dots:!0,slidesToShow:1,slidesToScroll:1,arrows:!0,fade:!0}),$("[data-slick-carousel-main]").slick({dots:!1,slidesToShow:1,slidesToScroll:1,fade:!0,autoplay:!0,autoplaySpeed:6e3,prevArrow:'<button class="slick-arrow-prev"><i class="fa fa-angle-left" aria-hidden="true"></i></button>',nextArrow:'<button class="slick-arrow-next"><i class="fa fa-angle-right" aria-hidden="true"></i></button>',responsive:[{breakpoint:1024,settings:{infinite:!0}},{breakpoint:769,settings:{arrows:!1}},{breakpoint:480,settings:{arrows:!1}}]}),$("[data-slick-carousel-sponsors]").slick({dots:!1,slidesToShow:6,slidesToScroll:6,arrows:!0,autoplay:!0,autoplaySpeed:8e3,variableWidth:!0,centerMode:!0,centerPadding:"60px",responsive:[{breakpoint:768,settings:{arrows:!1,slidesToShow:3,slidesToScroll:3}},{breakpoint:480,settings:{arrows:!1,slidesToShow:1,slidesToScroll:1}}]}),$('[data-toggle="slick-nav"]').on("click",function(e){e.preventDefault();var t=$(this).data("index");$("[data-slick-carousel-default]").slick("slickGoTo",t)})},this.bindSharing=function(){$("[data-share-default]").each(function(){var e=new ShareHandler($(this));e.appendFacebook(),e.appendTwitter(),e.appendGoogle(),e.appendMail()})},this.bindMagnificpopup=function(){$('[data-magnific="gallery"], [rel*="advertsfull"]').magnificPopup({type:"image",callbacks:{markupParse:function(e,t,a){t.description=a.el.data("description")}},gallery:{enabled:!0}}),$('[data-magnific="inline"]').magnificPopup({type:"inline",fixedContentPos:!0,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-slide-bottom"}),$('[data-magnific="iframe"]').magnificPopup({disableOn:700,type:"iframe",mainClass:"mfp-fade",removalDelay:160,preloader:!1,fixedContentPos:!1}),$('[data-magnific="form"]').magnificPopup({type:"inline",preloader:!1,focus:"#name",modal:!0,callbacks:{beforeOpen:function(){$(window).width()<700?this.st.focus=!1:this.st.focus="#name"}}}),$('[data-magnific="ajax-form"]').magnificPopup({type:"ajax",alignTop:!0,overflowY:"scroll",modal:!0,callbacks:{ajaxContentAdded:function(){new Forms($(this.content).find(".js-form-validate"),{popupInstance:this}).validate().bindEvents()}}}),$('[data-magnific="ajax"]').magnificPopup({type:"ajax",alignTop:!0,overflowY:"scroll"}),$(document).on("click","[data-magnific-dismiss]",function(e){e.preventDefault(),$.magnificPopup.close()})},this.selectize=function(){function e(e){void 0,this.removeItem(e,!0),this.clearOptions(),this.refreshOptions(!0),this.close()}var t,a,n,i,o,r,s,l,c={maxItems:1,valueField:"page_url",labelField:"title",searchField:["title","summary"],sortField:"title",onItemRemove:e,hideSelected:!0,preload:!0,options:[],render:{option:function(e,t){return'<div><span class="title"><span class="name">'+t(e.title)+"</span>"+(e.channel?'<span class="select-channel">'+t(e.channel)+"</span>":"")+"</span></div>"}},create:!1},d=$("#search-form"),p=d.find("button"),u=$('[data-selectize="activity"]'),f=$('[data-selectize="destination"]');t=$.extend({},c,{options:[u.data("selectizeOptions")],load:function(e,t){var a=r[0].selectize;return!e.length||a.items.length?t():void $.ajax({url:"/search/activities",dataType:"json",data:{keywords:encodeURIComponent(e)},error:function(){t()},success:function(e){t(t(e))}})},onChange:function(e){if(e){var t=r[0].selectize,a=t.items,n="/adventures/activities/"+e,i=this.options[e].title;if(void 0,a.length){var o=t.options[t.items[0]].channel_short.toLowerCase(),s=o.replace("_location","");n="/activities/"+s+"/"+e+"/"+t.items[0]}p.data("action",n),t.load(function(e){$.ajax({url:"/search/activity-location",dataType:"json",data:{name:encodeURIComponent(i)},error:function(){e()},success:function(n){t.clear(!0),e(n),a.length&&t.addItem(a[0],!0)}})})}}}),a=$.extend({},c,{load:function(e,t){return e.length?void $.ajax({url:"/search/locations",dataType:"json",data:{keywords:encodeURIComponent(e)},error:function(){t()},success:function(e){t(e)}}):t()},options:[f.data("selectizeOptions")],onChange:function(e){if(void 0,e){o=i.items.length?i.items[0]:o;var t=this.options[e].channel_short.toLowerCase(),a=t.replace("_location",""),n=this.options[e].channel_short,r=this.options[e].title,s="/adventures/"+a+"/"+e;p.data("action",s),void 0,i.load(function(e){$.ajax({url:"/search/location-activities",dataType:"json",data:{name:encodeURIComponent(r),channel:n},beforeSend:function(){i.options[o]&&(i.settings.placeholder=i.options[o].title,i.updatePlaceholder(),i.refreshItems(),i.items=[],void 0),i.clearOptions()},error:function(){e(),void 0},success:function(t){i.clearOptions(),e(t),void 0}})})}}}),n=u.selectize(t),r=f.selectize(a),i=n[0].selectize,s=r[0].selectize,l=f.data("selectizeValue"),o=u.data("selectizeValue"),l?s.addItem(l):o&&(i.settings.placeholder=i.options[o].title,i.updatePlaceholder()),p.on("click",function(e){var t=$(this).data("action");t&&(window.location=t)})}}function gRecaptcha(e){$("[data-parsley-recaptcha]").data("parsleyRecaptcha",1)}function Forms(e,t){var t=t?t:{},a=$.extend({popupInstance:null},t);this.bindEvents=function(){var t=e?e:$(".js-form-validate");t.find("[data-date-picker]").each(function(){$(this).datepicker({format:"dd/mm/yyyy",autoclose:!0,startDate:new Date,templates:{leftArrow:'<i class="fa fa-angle-left"></i>',rightArrow:'<i class="fa fa-angle-right"></i>'}})})},this.addValidators=function(){return Parsley.addValidator("recaptcha",{requirementType:"integer",validate:function(e,t,a){return 1===$(a.$element).data("parsleyRecaptcha")}}),Parsley.addValidator("dropdown",{requirementType:"integer",validate:function(e,t,a){var n=$(a.$element),i=n.data("fieldName"),o=$('[name="'+i+'"]').filter(function(){return""===$.trim(this.value)});return!o.exists()}}),Parsley.addValidator("honeypot",{requirementType:"string",validate:function(e,t,a){return e===t}}),this},this.validate=function(){var t=e?e:$(".js-form-validate");return t.exists()?(Parsley.on("form:submit",function(e){var t=e.$element[0];if($(t).is("subForm")){var n=$(t).find("#validationfield"),i=$.trim(n.val());if(i.length>0)return void void 0;n.remove();var o=$(t).find("[data-name]");o.each(function(e,t){t.name=$(t).data("name")})}return $.ajax({url:t.action,dataType:"json",type:"post",data:$(t).serialize(),error:function(e){$(t).find("[data-fail]").removeClass("hide")},success:function(e){200===e.status?$(t).find("[data-success]").removeClass("hide"):$(t).find("[data-fail]").removeClass("hide"),a.popupInstance&&a.popupInstance.close(),$(t).trigger("reset"),bootbox.dialog({message:"Thank you, your enquiry has been successfully submitted.",className:"bb-success-modal"})}}),!1}),t.parsley({inputs:Parsley.options.inputs+", [data-parsley-recaptcha], [data-parsley-honeypot], [data-parsley-dropdown]:visible",errorClass:"has-error"}),this):this}}function initialize(){function e(e){var t=new google.maps.Marker({position:e.position,map:o,title:e.title}),a=new google.maps.InfoWindow({content:e.content});t.addListener("click",function(){r&&r.close(),r=a,a.open(o,t)})}var t,a,n=$("[data-map-marker]"),i=[];if(n.exists()){t=n.length>1?new google.maps.LatLng((-25.998994),25.651953):new google.maps.LatLng(n.data("lat"),n.data("lng")),a=n.length>1?6:8;var o=new google.maps.Map(document.getElementById("map"),{zoom:a,center:t,mapTypeId:google.maps.MapTypeId.ROADMAP}),r=null;$("[data-map-markers]").data("mapMarkers");$.each(n,function(){var e={type:"info"},t=$(this),a=t.data(),n=t.html();e.position=new google.maps.LatLng(a.lat,a.lng),e.title=a.title,e.content=n,i.push(e)});for(var s,l=0;s=i[l];l++)e(s)}}$(function(){new StickyFooter($("#container"),$("#footer")).update().bindOnResize(),(new ExternalLinkHandler).addTargetAttribute($("body")),(new UIBindings).bindTooltips(),(new UIBindings).bindPopovers(),(new UIBindings).bindSlickCarousels(),(new UIBindings).bindSharing(),(new UIBindings).bindMagnificpopup(),(new UIBindings).selectize(),(new Forms).addValidators().validate().bindEvents(),(new PageTimer).logToConsole()}),$.fn.exists=function(){return $(this).length>0};
//# sourceMappingURL=scripts.js.map
